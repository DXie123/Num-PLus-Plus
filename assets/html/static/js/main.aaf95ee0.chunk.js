(this["webpackJsonpmathlive-box"]=this["webpackJsonpmathlive-box"]||[]).push([[0],{117:function(t,e,n){},186:function(t,e,n){"use strict";n.r(e);var r,i,o,c,a,s,u=n(2),l=n(1),f=n.n(l),p=n(58),d=n.n(p),x=(n(117),n(49)),b=n(8),j=n(9),h=n(13),v=(n(118),n(3)),O=n(24),g=n.n(O),y=n(120);!function(t){t[t.Eval=0]="Eval",t[t.Var=1]="Var",t[t.Defint=2]="Defint",t[t.Limit=3]="Limit",t[t.Matrix=4]="Matrix"}(s||(s={}));var m=new(r=function(){function t(){Object(b.a)(this,t),Object(x.a)(this,"latex",i,this),Object(x.a)(this,"expression",o,this),Object(x.a)(this,"update",c,this),Object(x.a)(this,"invertMatrix",a,this)}return Object(j.a)(t,[{key:"replaceInput",value:function(t){return C.forEach((function(e,n){return t=t.replace(n,e)})),t}},{key:"handleMatrix",value:function(t){var e=(t=this.replaceInput(t)).split(/\\\\|&/);e[0]=e[0].slice(15),e[e.length-1]=e[e.length-1].slice(0,e[e.length-1].length-13);var n=Math.sqrt(e.length),r=Array.from(Array(n).keys()).map((function(t){return"[".concat(e.slice(t*n,(t+1)*n).join(),"]")})).join();return"matrix(".concat(r,")")}},{key:"eval",get:function(){try{var t;return null===(t=this.expression)||void 0===t?void 0:t.evaluate().text()}catch(e){return}}},{key:"text",get:function(){try{var t,e=null===(t=this.expression)||void 0===t?void 0:t.toTeX();return E.forEach((function(t,n){var r;return e=null===(r=e)||void 0===r?void 0:r.replace(n,t)})),e}catch(n){return}}},{key:"mode",get:function(){try{return this.latex.search("int")>=0?s.Defint:this.latex.search("limit")>=0?s.Limit:this.latex.search("matrix")>=0?s.Matrix:this.latex.search("x")>=0?s.Var:s.Eval}catch(t){return s.Eval}}},{key:"solve",get:function(){try{var t;return null===(t=this.expression)||void 0===t?void 0:t.solveFor("x").toTeX()}catch(e){return}}},{key:"integrate",get:function(){if(void 0!==this.expression)try{return g.a.integrate(this.expression,"x").toTeX()}catch(t){return}}},{key:"diff",get:function(){if(void 0!==this.expression)try{return g.a.diff(this.expression,"x").toTeX()}catch(t){return}}}]),t}(),i=Object(h.a)(r.prototype,"latex",[v.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=Object(h.a)(r.prototype,"expression",[v.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),c=Object(h.a)(r.prototype,"update",[v.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){try{if(0===e.length)return t.latex="",void(t.expression=void 0);e.search("matrix")>=0?t.latex=t.handleMatrix(e):t.latex=t.replaceInput(e),t.expression=y.convertFromLaTeX(e)}catch(n){t.expression=void 0}}}}),Object(h.a)(r.prototype,"eval",[v.d],Object.getOwnPropertyDescriptor(r.prototype,"eval"),r.prototype),Object(h.a)(r.prototype,"text",[v.d],Object.getOwnPropertyDescriptor(r.prototype,"text"),r.prototype),Object(h.a)(r.prototype,"mode",[v.d],Object.getOwnPropertyDescriptor(r.prototype,"mode"),r.prototype),Object(h.a)(r.prototype,"solve",[v.d],Object.getOwnPropertyDescriptor(r.prototype,"solve"),r.prototype),Object(h.a)(r.prototype,"integrate",[v.d],Object.getOwnPropertyDescriptor(r.prototype,"integrate"),r.prototype),Object(h.a)(r.prototype,"diff",[v.d],Object.getOwnPropertyDescriptor(r.prototype,"diff"),r.prototype),a=Object(h.a)(r.prototype,"invertMatrix",[v.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(){try{t.expression=y("invert(".concat(t.latex,")"))}catch(e){t.expression=void 0}}}}),r),w=f.a.createContext(m),C=new Map([[RegExp(/\s+/g),""],[RegExp("\\\\times","g"),"*"],[RegExp("\\\\div","g"),"/"],[RegExp("\\\\arcsin","g"),"\\asin"],[RegExp("\\\\arccos","g"),"\\acos"],[RegExp("\\\\arctan","g"),"\\atan"],[RegExp("\\\\sqrt\\[\\]","g"),"\\sqrt"]]),E=new Map([[RegExp("\\\\cdot","g"),"\\times"]]);Object(v.c)((function(){window.variable.postMessage(m.mode.valueOf().toString())}));var k=function t(){var e=this;Object(b.a)(this,t),this.mfController=void 0,this.setController=function(t){e.mfController=t,e.focus()},this.add=function(t){return e.mfController.insert(t,{focus:!0,format:"latex"})},this.backspace=function(){e.mfController.executeCommand("deletePreviousChar"),e.focus()},this.clear=function(){e.mfController.executeCommand("deleteAll"),e.focus()},this.focus=function(){e.mfController&&e.mfController.focus&&e.mfController.focus()}},D=n(70);function M(){var t=Object(l.useContext)(w),e=new k;return Object(u.jsx)(D.a,{virtualKeyboardMode:"off",onContentDidChange:function(e){return t.update(e.getValue("latex-expanded"))},style:{outline:0,fontSize:"2em"},ref:function(t){t&&(e.setController(t),window.add=e.add,window.backspace=e.backspace,window.clear=e.clear)}})}var P,I=n(5),R=n(33),T=n(108),L=n.n(T),S=Object(R.a)((function(){var t=Object(l.useContext)(w),e=Object(l.useRef)(null),n={target:"",width:800,height:500,yAxis:{domain:[-1.2,1.2]},grid:!0,data:[{fn:null===t||void 0===t?void 0:t.text}]};return Object(l.useEffect)((function(){try{L()(Object.assign({},n,{target:e.current}))}catch(t){}})),Object(u.jsx)("div",{ref:e})})),F=Object(R.a)((function(){switch(Object(l.useContext)(w).mode){case s.Eval:return Object(u.jsx)(z,{});case s.Var:return Object(u.jsx)(V,{});case s.Matrix:return Object(u.jsx)(A,{});default:return Object(u.jsx)(z,{})}})),z=Object(R.a)((function(){var t=Object(l.useContext)(w),e=t.eval,n=t.text;return void 0===e?Object(u.jsx)("div",{}):e===n?Object(u.jsx)(X,{content:"=".concat(e)}):Object(u.jsxs)("div",{children:[Object(u.jsx)(X,{content:"=".concat(e)}),Object(u.jsx)(X,{content:"=".concat(n)})]})})),A=Object(R.a)((function(){var t=Object(l.useContext)(w);return Object(l.useEffect)((function(){return window.invertMatrix=t.invertMatrix})),void 0===t.text?Object(u.jsx)("div",{}):Object(u.jsx)(X,{content:"=".concat(t.text)})}));!function(t){t[t.Int=0]="Int",t[t.Diff=1]="Diff",t[t.Simplify=2]="Simplify",t[t.Plot=3]="Plot"}(P||(P={}));var V=Object(R.a)((function(){var t=Object(l.useContext)(w),e=Object(l.useState)(),n=Object(I.a)(e,2),r=n[0],i=n[1];return Object(l.useEffect)((function(){window.doIntegrate=function(){i(P.Int)},window.doDiff=function(){i(P.Diff)},window.doPlot=function(){i(P.Plot)}}),[]),r===P.Int?Object(u.jsx)(X,{content:"=".concat(t.integrate)}):r===P.Diff?Object(u.jsx)(X,{content:"=".concat(t.diff)}):r===P.Plot?Object(u.jsx)(S,{}):Object(u.jsx)("div",{})}));function X(t){return Object(u.jsxs)("div",{style:{display:"flex"},children:[Object(u.jsx)(D.a,{value:t.content,readOnly:!0,style:{outline:0}}),Object(u.jsx)("button",{hidden:t.hideAdd,style:{height:"50%",marginLeft:"20pt"},onClick:function(){window.clear(),window.add(t.content.substr(1))},children:"+"})]})}var q=F;function B(){return Object(u.jsxs)(w.Provider,{value:m,children:[Object(u.jsx)(M,{}),Object(u.jsx)(q,{}),Object(u.jsx)("button",{onClick:function(){return window.add("\\left[\\begin{matrix} 2 & 3 \\\\ 4 & 7 \\end{matrix}\\right]")},children:"Test"})]})}var J=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,190)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),r(t),i(t),o(t),c(t)}))};d.a.render(Object(u.jsx)(f.a.StrictMode,{children:Object(u.jsx)(B,{})}),document.getElementById("root")),J()}},[[186,1,2]]]);
//# sourceMappingURL=main.aaf95ee0.chunk.js.map