{"version":3,"sources":["models/expression.tsx","models/controller.tsx","components/MathBox.tsx","components/ResultBox.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["nerdamerAll","require","expStore","latex","this","expression","evaluate","text","error","variables","solveFor","toString","nerdamer","integrate","diff","observable","action","input","convertFromLaTeX","computed","ExpContext","React","createContext","Controller","mfController","setController","mf","focus","add","insert","format","backspace","executeCommand","clear","MathBox","exp","useContext","controller","virtualKeyboardMode","onContentDidChange","update","getValue","ref","mfe","window","DisplayMode","ResultBox","observer","useState","Eval","display","setDisplay","useEffect","variable","doEvalCalc","doSymCalc","Symbolic","doPlot","Plot","console","log","EvalResultBox","SymResultBox","PlotResultBox","Error","evalResult","eval","InfoBox","content","prop","value","readOnly","App","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a17237e9.chunk.js","sourcesContent":["import { action, computed, observable } from \"mobx\";\r\nimport React from \"react\";\r\nimport nerdamer from 'nerdamer';\r\nconst nerdamerAll = require('nerdamer/all');\r\n\r\nexport default class Expression {\r\n  latex: string = '';\r\n\r\n  @observable\r\n  private expression!: nerdamer.Expression;\r\n\r\n  @action\r\n  update = (input: string) => {\r\n    this.latex = input;\r\n    try {\r\n      this.expression = nerdamerAll.convertFromLaTeX(input) as nerdamer.Expression;\r\n    } catch (error) {\r\n      this.expression = nerdamer('');\r\n    }\r\n  }\r\n\r\n  @computed get eval(): string {\r\n    try {\r\n      return this.expression.evaluate().text();\r\n    } catch (error) {\r\n      return 'error';\r\n    }\r\n  }\r\n\r\n  @computed get text(): string {\r\n    try {\r\n      return this.expression.evaluate().text('fractions');\r\n    } catch (error) {\r\n      return 'error';\r\n    }\r\n  }\r\n\r\n  @computed get variable(): string[] {\r\n    try {\r\n      return this.expression.variables();\r\n    } catch (error) {\r\n      return ['error'];\r\n    }\r\n  }\r\n\r\n  @computed get solve(): string {\r\n    try {\r\n      return this.expression.solveFor('x').toString();\r\n    } catch (error) {\r\n      return 'error';\r\n    }\r\n  }\r\n\r\n  @computed get integrate(): string {\r\n    try {\r\n      return nerdamer.integrate(this.expression, 'x').evaluate().text('fractions');\r\n    } catch (error) {\r\n      return 'error';\r\n    }\r\n  }\r\n\r\n  @computed get diff(): string {\r\n    try {\r\n      return nerdamer.diff(this.expression, 'x').evaluate().text('fractions');\r\n    } catch (error) {\r\n      return 'error';\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport const expStore = new Expression();\r\nexport const ExpContext = React.createContext<Expression>(expStore);\r\n","import { Mathfield } from 'mathlive/dist/public/mathfield'\r\n\r\nexport default class Controller {\r\n  private mfController!: Mathfield;\r\n\r\n  setController = (mf: Mathfield) => {\r\n    this.mfController = mf;\r\n    this.focus();\r\n  }\r\n\r\n  add = (expression: string) => this.mfController.insert(expression, { focus: true, format: \"latex\" });\r\n\r\n  backspace = () => {\r\n    this.mfController.executeCommand(\"deletePreviousChar\");\r\n    this.focus();\r\n  }\r\n\r\n  clear = () => {\r\n    this.mfController.executeCommand(\"deleteAll\");\r\n    this.focus();\r\n  }\r\n\r\n  private focus = () => {\r\n    if (this.mfController && this.mfController.focus) {\r\n      this.mfController.focus!();\r\n    }\r\n  }\r\n}","import React, { useContext } from \"react\";\r\nimport { ExpContext } from \"../models/expression\";\r\nimport Controller from '../models/controller';\r\nimport MathView from \"react-math-view\";\r\n\r\nexport default function MathBox() {\r\n  const exp = useContext(ExpContext);\r\n  const controller = new Controller();\r\n\r\n  return (\r\n    <MathView\r\n      virtualKeyboardMode='off'\r\n      onContentDidChange={(mf) => exp.update(mf.getValue(\"latex-expanded\"))}\r\n      ref={(mfe) => {\r\n        if (mfe) {\r\n          controller.setController(mfe!);\r\n          window.add = controller.add;\r\n          window.backspace = controller.backspace;\r\n          window.clear = controller.clear;\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}","import { observer } from \"mobx-react-lite\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { ExpContext } from \"../models/expression\";\r\nimport MathView from 'react-math-view';\r\n\r\nenum DisplayMode {\r\n  Eval,\r\n  Symbolic,\r\n  Plot,\r\n}\r\n\r\nconst ResultBox = observer(() => {\r\n  const exp = useContext(ExpContext);\r\n  const [display, setDisplay] = useState<DisplayMode>(DisplayMode.Eval);\r\n\r\n  useEffect(() => {\r\n    if (exp.variable) {\r\n      setDisplay(DisplayMode.Eval);\r\n    }\r\n  }, [exp.variable]);\r\n\r\n  useEffect(() => {\r\n    window.doEvalCalc = () => { setDisplay(DisplayMode.Eval); };\r\n    window.doSymCalc = () => { setDisplay(DisplayMode.Symbolic); };\r\n    window.doPlot = () => { setDisplay(DisplayMode.Plot); };\r\n    console.log('run hook');\r\n  }, []);\r\n\r\n  switch (display) {\r\n    case DisplayMode.Eval:\r\n      return (<EvalResultBox />);\r\n    case DisplayMode.Symbolic:\r\n      return (<SymResultBox />);\r\n    case DisplayMode.Plot:\r\n      return (<PlotResultBox />);\r\n    default:\r\n      throw Error('Unknown type');\r\n  }\r\n});\r\n\r\nconst EvalResultBox = observer(() => {\r\n  const exp = useContext(ExpContext);\r\n  const evalResult = exp.eval;\r\n  const textResult = exp.text;\r\n\r\n  if (evalResult === textResult) {\r\n    return (<InfoBox content={`=${evalResult}`} />);\r\n  }\r\n\r\n  return (<div>\r\n    <InfoBox content={`=${exp.eval}`} />\r\n    <InfoBox content={`=${exp.text}`} />\r\n  </div>);\r\n});\r\n\r\nconst SymResultBox = observer(() => {\r\n  const exp = useContext(ExpContext);\r\n\r\n  return (<div>\r\n    <InfoBox content={`=${exp.integrate}`} />\r\n    <InfoBox content={`=${exp.diff}`} />\r\n  </div>);\r\n});\r\n\r\nconst PlotResultBox = observer(() => {\r\n  throw Error('Not implemented yet');\r\n});\r\n\r\ninterface InfoBoxProp {\r\n  content: string,\r\n}\r\n\r\nfunction InfoBox(prop: InfoBoxProp) {\r\n  return (<MathView\r\n    value={prop.content}\r\n    readOnly={true}\r\n  />);\r\n}\r\n\r\nexport default ResultBox;","import React from 'react';\nimport MathBox from './components/MathBox';\nimport ResultBox from './components/ResultBox';\nimport { ExpContext, expStore } from './models/expression';\n\nexport default function App() {\n  return (\n    <ExpContext.Provider value={expStore}>\n      <MathBox />\n      <ResultBox />\n    </ExpContext.Provider>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}